{"version":3,"file":"uiowa-digit-only.umd.js","sources":["ng://@uiowa/digit-only/lib/digit-only.directive.ts","ng://@uiowa/digit-only/lib/digit-only.module.ts"],"sourcesContent":["import { Directive, ElementRef, HostListener, Input } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[digitOnly]'\r\n})\r\nexport class DigitOnlyDirective {\r\n  private decimalCounter = 0;\r\n  private navigationKeys = [\r\n    'Backspace',\r\n    'Delete',\r\n    'Tab',\r\n    'Escape',\r\n    'Enter',\r\n    'Home',\r\n    'End',\r\n    'ArrowLeft',\r\n    'ArrowRight',\r\n    'Clear',\r\n    'Copy',\r\n    'Paste'\r\n  ];\r\n  @Input() decimal? = false;\r\n  inputElement: HTMLElement;\r\n\r\n  constructor(public el: ElementRef) {\r\n    this.inputElement = el.nativeElement;\r\n  }\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  onKeyDown(e: KeyboardEvent) {\r\n    if (\r\n      this.navigationKeys.indexOf(e.key) > -1 || // Allow: navigation keys: backspace, delete, arrows etc.\r\n      (e.key === 'a' && e.ctrlKey === true) || // Allow: Ctrl+A\r\n      (e.key === 'c' && e.ctrlKey === true) || // Allow: Ctrl+C\r\n      (e.key === 'v' && e.ctrlKey === true) || // Allow: Ctrl+V\r\n      (e.key === 'x' && e.ctrlKey === true) || // Allow: Ctrl+X\r\n      (e.key === 'a' && e.metaKey === true) || // Allow: Cmd+A (Mac)\r\n      (e.key === 'c' && e.metaKey === true) || // Allow: Cmd+C (Mac)\r\n      (e.key === 'v' && e.metaKey === true) || // Allow: Cmd+V (Mac)\r\n      (e.key === 'x' && e.metaKey === true) || // Allow: Cmd+X (Mac)\r\n      (this.decimal && e.key === '.' && this.decimalCounter < 1) // Allow: only one decimal point\r\n    ) {\r\n      // let it happen, don't do anything\r\n      return;\r\n    }\r\n    // Ensure that it is a number and stop the keypress\r\n    if (e.key === ' ' || isNaN(Number(e.key))) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  @HostListener('keyup', ['$event'])\r\n  onKeyUp(e: KeyboardEvent) {\r\n    if (!this.decimal) {\r\n      return;\r\n    } else {\r\n      this.decimalCounter = this.el.nativeElement.value.split('.').length - 1;\r\n    }\r\n  }\r\n\r\n  @HostListener('paste', ['$event'])\r\n  onPaste(event: ClipboardEvent) {\r\n    event.preventDefault();\r\n    const pastedInput: string = event.clipboardData.getData('text/plain');\r\n\r\n    if (!this.decimal) {\r\n      document.execCommand(\r\n        'insertText',\r\n        false,\r\n        pastedInput.replace(/[^0-9]/g, '')\r\n      );\r\n    } else if (this.isValidDecimal(pastedInput)) {\r\n      document.execCommand(\r\n        'insertText',\r\n        false,\r\n        pastedInput.replace(/[^0-9.]/g, '')\r\n      );\r\n    }\r\n  }\r\n\r\n  @HostListener('drop', ['$event'])\r\n  onDrop(event: DragEvent) {\r\n    event.preventDefault();\r\n    const textData = event.dataTransfer.getData('text');\r\n    this.inputElement.focus();\r\n\r\n    if (!this.decimal) {\r\n      document.execCommand(\r\n        'insertText',\r\n        false,\r\n        textData.replace(/[^0-9]/g, '')\r\n      );\r\n    } else if (this.isValidDecimal(textData)) {\r\n      document.execCommand(\r\n        'insertText',\r\n        false,\r\n        textData.replace(/[^0-9.]/g, '')\r\n      );\r\n    }\r\n  }\r\n\r\n  isValidDecimal(string: string): boolean {\r\n    return string.split('.').length <= 2;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { DigitOnlyDirective } from './digit-only.directive';\r\n\r\n@NgModule({\r\n  imports: [],\r\n  declarations: [DigitOnlyDirective],\r\n  exports: [DigitOnlyDirective]\r\n})\r\nexport class DigitOnlyModule {}\r\n"],"names":["Directive","ElementRef","Input","HostListener","NgModule"],"mappings":"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"}